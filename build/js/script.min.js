"use strict";document.addEventListener("DOMContentLoaded",(()=>{let e=document.querySelector(".js-burger-btn"),t=document.querySelector(".js-menu"),n=document.querySelectorAll(".js-btn-sign-in"),s=document.querySelectorAll(".js-btn-sign-up"),o=document.querySelector(".js-sign-in-popup"),c=document.querySelector(".js-sign-up-popup"),i=document.querySelectorAll(".js-close-btn"),r=document.querySelector(".js-login-form"),u=document.querySelector(".js-sign-up-form"),l=document.querySelector(".js-step-1"),d=document.querySelector(".js-step-2"),a=document.querySelector(".subscribe-form"),m=document.querySelector(".js-btn-next"),f=document.querySelector(".js-btn-back"),L=!1,b=document.querySelector(".js-code"),h=document.querySelectorAll(".element-animation"),y=new IntersectionObserver((function(e){e.forEach((e=>{e.isIntersecting&&e.target.classList.add("element-show")}))}),{threshold:[.4]});for(let e of h)y.observe(e);function S(...e){e.forEach((e=>{e.classList.contains("hide")||e.classList.add("hide")}))}function p(e){e.classList.remove("hide")}function v(e){e.querySelectorAll(".js-input-wrapper").forEach((e=>{if(e.querySelector("input").value)L=!0;else{let t=e.querySelector(".js-error");t.classList.remove("hide"),setTimeout((function(){t.classList.add("hide")}),3e3),L=!1}}))}function q(e,t){let n=e.querySelector('button[type="submit"]');n.textContent=t,n.classList.remove("subscribe-form__btn--loading")}function g(e=!1,t,n){L&&(!function(e){let t=e.querySelector('button[type="submit"]');t.textContent="",t.classList.add("subscribe-form__btn--loading")}(t),setTimeout((function(){fetch("#",{method:"POST",credentials:"same-origin",body:new FormData(t)}).then((function(n){n.ok?alert("Все норм!"):e?(q(t,"Успешно!"),setTimeout((function(){e.classList.add("hide")}),3e3)):(q(t,"Успешно!"),t.reset())}))}),3e3))}b&&(b.textContent=Math.random().toString(36).slice(2,7)),e&&e.addEventListener("click",(function(){t.classList.toggle("open"),e.classList.toggle("open")})),n&&n.forEach((e=>{e.addEventListener("click",(()=>{p(o)}))})),s&&s.forEach((e=>{e.addEventListener("click",(()=>{p(c)}))})),o.classList.contains("hide")&&c.classList.contains("hide")||document.addEventListener("click",(({target:e})=>{e!==o&&e!==c||S(o,c)})),i&&i.forEach((e=>{e.addEventListener("click",(()=>{S(o,c)}))})),r&&r.addEventListener("submit",(e=>{e.preventDefault(),v(r),g(o,r)})),u&&u.addEventListener("submit",(e=>{e.preventDefault(),v(u),g(c,u)})),m.addEventListener("click",(function(){v(l),L&&(l.classList.add("hide"),d.classList.remove("hide"))})),f.addEventListener("click",(function(){d.classList.add("hide"),l.classList.remove("hide")})),a&&a.addEventListener("submit",(e=>{e.preventDefault(),v(a),g("",a)}))}));
